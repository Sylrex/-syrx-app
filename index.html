<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ุชุทุจูู SYRX</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-shadow {
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .glow {
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
        }
        .page {
            display: none;
        }
        .page.active {
            display: block;
        }
        .nav-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        /* ุฅุตูุงุญุงุช RTL */
        body {
            font-family: Arial, sans-serif;
            text-align: right;
        }
        .flex.items-center.space-x-3 {
            flex-direction: row-reverse;
        }
        .space-x-4 > * + * {
            margin-right: 1rem;
            margin-left: 0;
        }
        .leaderboard .flex {
            flex-direction: row-reverse;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- ุฑุฃุณ ุงูุตูุญุฉ ูุน ุดุนุงุฑ SYRX -->
    <header class="gradient-bg text-white p-6 text-center">
        <div class="flex items-center justify-center space-x-3">
            <div class="w-12 h-12 bg-white rounded-full flex items-center justify-center">
                <span class="text-2xl font-bold text-purple-600">S</span>
            </div>
            <h1 class="text-3xl font-bold">SYRX</h1>
        </div>
    </header>

    <!-- ุดุฑูุท ุงูุชููู -->
    <nav class="bg-white shadow-md p-4">
        <div class="flex justify-center space-x-4">
            <button onclick="showPage('profile')" class="nav-btn active px-6 py-2 rounded-full font-medium transition-all duration-300 bg-gray-100 text-gray-700 hover:bg-gray-200">
                ุงูููู ุงูุดุฎุตู
            </button>
            <button onclick="showPage('tasks')" class="nav-btn px-6 py-2 rounded-full font-medium transition-all duration-300 bg-gray-100 text-gray-700 hover:bg-gray-200">
                ุงูููุงู ูุงููุญูุธุฉ
            </button>
            <button onclick="showPage('leaderboard')" class="nav-btn px-6 py-2 rounded-full font-medium transition-all duration-300 bg-gray-100 text-gray-700 hover:bg-gray-200">
                ูุงุฆูุฉ ุงููุชุตุฏุฑูู
            </button>
        </div>
    </nav>

    <!-- ุงูุตูุญุฉ 1: ุงูููู ุงูุดุฎุตู -->
    <div id="profile" class="page active p-6 max-w-md mx-auto">
        <div class="bg-white rounded-2xl card-shadow p-8 text-center">
            <!-- ุตูุฑุฉ ุงููุณุชุฎุฏู -->
            <div class="relative mb-6">
                <div class="w-32 h-32 mx-auto rounded-full gradient-bg p-1">
                    <div class="w-full h-full bg-white rounded-full flex items-center justify-center">
                        <img id="user-photo" src="https://via.placeholder.com/50" alt="ุตูุฑุฉ ุงููุณุชุฎุฏู" class="w-28 h-28 rounded-full">
                    </div>
                </div>
                <div class="absolute -bottom-2 -left-2 w-8 h-8 bg-green-500 rounded-full border-4 border-white flex items-center justify-center">
                    <span class="text-white text-xs">โ</span>
                </div>
            </div>
            
            <!-- ุงุณู ุงููุณุชุฎุฏู -->
            <h2 id="user-name" class="text-2xl font-bold text-gray-800 mb-2">ุฌุงุฑู ุงูุชุญููู...</h2>
            <p class="text-gray-500 mb-6">ูุณุชูู 5</p>
            
            <!-- ุงูุฅุญุตุงุฆูุงุช -->
            <div class="grid grid-cols-2 gap-4 mb-6">
                <div class="bg-purple-50 rounded-xl p-4">
                    <div class="text-2xl font-bold text-purple-600" id="referrals">0</div>
                    <div class="text-sm text-gray-600">ุงูุฅุญุงูุงุช</div>
                </div>
                <div class="bg-blue-50 rounded-xl p-4">
                    <div class="text-2xl font-bold text-blue-600" id="points">0</div>
                    <div class="text-sm text-gray-600">ุงูููุงุท</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ุงูุตูุญุฉ 2: ุงูููุงู ูุงููุญูุธุฉ -->
    <div id="tasks" class="page p-6 max-w-md mx-auto">
        <!-- ุงูููุงู -->
        <div class="bg-white rounded-2xl card-shadow p-6 mb-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4">ุฅููุงู ุงูููุงู</h3>
            <div class="space-y-3">
                <button onclick="completeTask('telegram')" class="w-full flex items-center justify-between p-4 bg-blue-50 hover:bg-blue-100 rounded-xl transition-colors">
                    <div class="flex items-center space-x-3">
                        <img src="/telegram-icon.png" alt="Telegram Icon" class="w-10 h-10 rounded-full">
                        <span class="font-medium text-gray-800">ูุชุงุจุนุฉ ููุงุฉ Telegram</span>
                    </div>
                    <span class="text-blue-600 font-bold">+30 ููุงุท</span>
                </button>
                
                <button onclick="completeTask('x')" class="w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 rounded-xl transition-colors">
                    <div class="flex items-center space-x-3">
                        <img src="/x-icon.png" alt="X Icon" class="w-10 h-10 rounded-full">
                        <span class="font-medium text-gray-800">ูุชุงุจุนุฉ ุญุณุงุจ X</span>
                    </div>
                    <span class="text-gray-600 font-bold">+35 ููุงุท</span>
                </button>
                
                <button onclick="completeTask('facebook')" class="w-full flex items-center justify-between p-4 bg-blue-50 hover:bg-blue-100 rounded-xl transition-colors">
                    <div class="flex items-center space-x-3">
                        <img src="/facebook-icon.png" alt="Facebook Icon" class="w-10 h-10 rounded-full">
                        <span class="font-medium text-gray-800">ูุชุงุจุนุฉ Facebook</span>
                    </div>
                    <span class="text-blue-600 font-bold">+40 ููุงุท</span>
                </button>
                
                <button onclick="completeTask('youtube')" class="w-full flex items-center justify-between p-4 bg-red-50 hover:bg-red-100 rounded-xl transition-colors">
                    <div class="flex items-center space-x-3">
                        <img src="/youtube-icon.png" alt="YouTube Icon" class="w-10 h-10 rounded-full">
                        <span class="font-medium text-gray-800">ุงูุงุดุชุฑุงู ูู YouTube</span>
                    </div>
                    <span class="text-red-600 font-bold">+50 ููุงุท</span>
                </button>
            </div>
        </div>

        <!-- ูุณู ุงููุญูุธุฉ -->
        <div class="bg-white rounded-2xl card-shadow p-6 mb-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4">ุงููุญูุธุฉ</h3>
            <div id="ton-connect" class="w-full gradient-bg text-white py-4 rounded-xl font-medium hover:opacity-90 transition-opacity mb-4 text-center">
                ุฑุจุท ูุญูุธุฉ Telegram
            </div>
            <div id="wallet-address" class="hidden text-center text-sm text-gray-500"></div>
            <button onclick="disconnectWallet()" id="disconnect-btn" class="hidden w-full bg-red-100 text-red-700 py-3 rounded-xl font-medium hover:bg-red-200 transition-colors">
                ูุตู ุงููุญูุธุฉ
            </button>
        </div>

        <!-- ุฑุงุจุท ุงูุฅุญุงูุฉ -->
        <div class="bg-white rounded-2xl card-shadow p-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4">ุฏุนูุฉ ุงูุฃุตุฏูุงุก</h3>
            <div class="bg-gray-50 rounded-xl p-4 mb-4">
                <div class="text-sm text-gray-600 mb-2">ุฑุงุจุท ุงูุฅุญุงูุฉ ุงูุฎุงุต ุจู:</div>
                <div id="referral-link" class="text-sm font-mono text-purple-600 break-all"></div>
            </div>
            <button onclick="copyReferralLink()" class="w-full bg-purple-100 text-purple-700 py-3 rounded-xl font-medium hover:bg-purple-200 transition-colors">
                ูุณุฎ ุงูุฑุงุจุท
            </button>
        </div>
    </div>

    <!-- ุงูุตูุญุฉ 3: ูุงุฆูุฉ ุงููุชุตุฏุฑูู -->
    <div id="leaderboard" class="page p-6 max-w-2xl mx-auto">
        <div class="bg-white rounded-2xl card-shadow p-6">
            <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">๐ ุฃูุถู ุงููุญูููู</h3>
            
            <!-- ููุตุฉ ุงูุซูุงุซุฉ ุงูุฃูุงุฆู -->
            <div class="flex justify-center items-end space-x-4 mb-8">
                <!-- ุงููุฑูุฒ ุงูุซุงูู -->
                <div class="text-center">
                    <div class="w-16 h-16 bg-gray-300 rounded-full flex items-center justify-center mb-2">
                        <span class="text-2xl">๐ฅ</span>
                    </div>
                    <div class="font-bold text-sm" id="second-place-name">ูุงุนุจ 2</div>
                    <div class="text-xs text-gray-600" id="second-place-points">245 ุฅุญุงูุฉ</div>
                </div>
                
                <!-- ุงููุฑูุฒ ุงูุฃูู -->
                <div class="text-center">
                    <div class="w-20 h-20 bg-yellow-400 rounded-full flex items-center justify-center mb-2 glow">
                        <span class="text-3xl">๐</span>
                    </div>
                    <div class="font-bold" id="first-place-name">ูุงุนุจ 1</div>
                    <div class="text-sm text-gray-600" id="first-place-points">312 ุฅุญุงูุฉ</div>
                </div>
                
                <!-- ุงููุฑูุฒ ุงูุซุงูุซ -->
                <div class="text-center">
                    <div class="w-16 h-16 bg-orange-400 rounded-full flex items-center justify-center mb-2">
                        <span class="text-2xl">๐ฅ</span>
                    </div>
                    <div class="font-bold text-sm" id="third-place-name">ูุงุนุจ 3</div>
                    <div class="text-xs text-gray-600" id="third-place-points">198 ุฅุญุงูุฉ</div>
                </div>
            </div>

            <!-- ูุงุฆูุฉ ุงููุชุตุฏุฑูู -->
            <div class="space-y-2 max-h-96 overflow-y-auto" id="leaderboard-list"></div>
        </div>
    </div>

    <!-- ุชุญููู Telegram Web Apps API -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- ุชุญููู ููุชุจุฉ TON Connect -->
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <script>
        // ุชููุฆุฉ Telegram Web App
        const tg = window.Telegram.WebApp;
        tg.ready();

        // ุนุฑุถ ุงุณู ุงููุณุชุฎุฏู ูุตูุฑุชู
        const userName = tg.initDataUnsafe?.user?.first_name || 'ูุณุชุฎุฏู';
        document.getElementById('user-name').textContent = userName;
        const userPhoto = tg.initDataUnsafe?.user?.photo_url || 'https://via.placeholder.com/50';
        document.getElementById('user-photo').src = userPhoto;

        // ุฅูุดุงุก ุฑุงุจุท ุฅุญุงูุฉ ูุฎุตุต
        const userId = tg.initDataUnsafe?.user?.id || 'anonymous';
        const referralLink = `https://t.me/S$yRXAppBot/SYRXApp?start=ref_${userId}`;
        document.getElementById('referral-link').textContent = referralLink;

        // ุฅุนุฏุงุฏ TON Connect
        const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
            manifestUrl: "https://syrx.onrender.com/tonconnect-manifest.json",
            walletsListConfiguration: {
                includeWallets: [
                    {
                        appName: "telegram-wallet",
                        name: "Wallet",
                        imageUrl: "https://wallet.tg/images/logo-288.png",
                        aboutUrl: "https://wallet.tg/",
                        universalLink: "https://t.me/wallet/start",
                        bridgeUrl: "https://bridge.tonapi.io/bridge",
                        platforms: ["ios", "android", "macos", "windows", "linux"]
                    }
                ]
            }
        });

        tonConnectUI.uiOptions = {
            buttonRootId: "ton-connect"
        };

        // ุงูุชุญูู ูู ุญุงูุฉ ุงูุงุชุตุงู ุนูุฏ ุงูุชุญููู
        if (tonConnectUI.wallet) {
            handleConnection(tonConnectUI.wallet);
        }

        // ูุนุงูุฌุฉ ุชุบููุฑุงุช ุญุงูุฉ ุงูุงุชุตุงู
        tonConnectUI.onStatusChange(
            walletInfo => {
                console.log("ุญุงูุฉ ุงูุงุชุตุงู:", walletInfo);
                handleConnection(walletInfo);
            },
            error => {
                console.error("ุฎุทุฃ ูู ุงูุงุชุตุงู:", error);
                alert("ุฎุทุฃ ูู ุงูุงุชุตุงู: " + error.message);
                handleDisconnection();
            }
        );

        function handleConnection(walletInfo) {
            const connectButton = document.getElementById('ton-connect');
            const walletAddressDiv = document.getElementById('wallet-address');
            const disconnectBtn = document.getElementById('disconnect-btn');
            if (walletInfo && walletInfo.account && walletInfo.account.address) {
                connectButton.classList.add('hidden');
                walletAddressDiv.textContent = `ุนููุงู ุงููุญูุธุฉ: ${walletInfo.account.address}`;
                walletAddressDiv.classList.remove('hidden');
                disconnectBtn.classList.remove('hidden');
            } else {
                handleDisconnection();
            }
        }

        function handleDisconnection() {
            const connectButton = document.getElementById('ton-connect');
            const walletAddressDiv = document.getElementById('wallet-address');
            const disconnectBtn = document.getElementById('disconnect-btn');
            connectButton.classList.remove('hidden');
            walletAddressDiv.classList.add('hidden');
            disconnectBtn.classList.add('hidden');
        }

        async function disconnectWallet() {
            try {
                await tonConnectUI.disconnect();
                handleDisconnection();
            } catch (error) {
                console.error("ุฎุทุฃ ูู ุงููุตู:", error);
                alert("ุฎุทุฃ ูู ูุตู ุงููุญูุธุฉ: " + error.message);
            }
        }

        // ุงูุชููู ุจูู ุงูุตูุญุงุช
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            event.target.classList.add('active');
        }

        // ุฅุฏุงุฑุฉ ุงูููุงู ูุงูููุงุท
        let points = localStorage.getItem('points') || 0;
        document.getElementById('points').textContent = points;

        function completeTask(platform) {
            const platformNames = {
                'telegram': 'Telegram',
                'x': 'X',
                'facebook': 'Facebook',
                'youtube': 'YouTube'
            };
            if (localStorage.getItem(platform) === 'completed') {
                alert("ุงููููุฉ ููุชููุฉ ุจุงููุนู!");
                return;
            }
            const pointsToAdd = {
                'telegram': 30,
                'x': 35,
                'facebook': 40,
                'youtube': 50
            };
            points = parseInt(points) + pointsToAdd[platform];
            localStorage.setItem('points', points);
            localStorage.setItem(platform, 'completed');
            document.getElementById('points').textContent = points;
            alert(`ุฑุงุฆุน! ููุฏ ุฃูููุช ูููุฉ ${platformNames[platform]}. ุชูุช ุฅุถุงูุฉ ${pointsToAdd[platform]} ููุทุฉ!`);
        }

        // ูุณุฎ ุฑุงุจุท ุงูุฅุญุงูุฉ
        function copyReferralLink() {
            const link = document.getElementById('referral-link').textContent;
            navigator.clipboard.writeText(link).then(() => {
                alert('ุชู ูุณุฎ ุฑุงุจุท ุงูุฅุญุงูุฉ!');
            }).catch(() => {
                alert('ุงูุฑุงุจุท: ' + link);
            });
        }

        // ูุงุฆูุฉ ุงููุชุตุฏุฑูู (ุจูุงูุงุช ุชุฌุฑูุจูุฉ)
        const leaderboardData = Array.from({length: 100}, (_, i) => ({
            name: `ูุงุนุจ ${i + 1}`,
            points: Math.floor(Math.random() * 1000) + 100
        })).sort((a, b) => b.points - a.points);

        // ุนุฑุถ ุฃูุถู 3 ูุงุนุจูู
        document.getElementById('first-place-name').textContent = leaderboardData[0].name;
        document.getElementById('first-place-points').textContent = `${leaderboardData[0].points} ุฅุญุงูุฉ`;
        document.getElementById('second-place-name').textContent = leaderboardData[1].name;
        document.getElementById('second-place-points').textContent = `${leaderboardData[1].points} ุฅุญุงูุฉ`;
        document.getElementById('third-place-name').textContent = leaderboardData[2].name;
        document.getElementById('third-place-points').textContent = `${leaderboardData[2].points} ุฅุญุงูุฉ`;

        // ุนุฑุถ ูุงุฆูุฉ ุงููุชุตุฏุฑูู
        const leaderboardList = document.getElementById('leaderboard-list');
        leaderboardData.forEach((player, index) => {
            const div = document.createElement('div');
            div.className = `flex items-center justify-between p-3 ${index === 0 ? 'bg-yellow-50 rounded-xl border-2 border-yellow-200' : index === 1 ? 'bg-gray-50 rounded-xl' : index === 2 ? 'bg-orange-50 rounded-xl' : index === 4 ? 'bg-purple-50 rounded-xl border border-purple-200' : 'hover:bg-gray-50 rounded-xl transition-colors'}`;
            div.innerHTML = `
                <div class="flex items-center space-x-3">
                    <span class="w-8 h-8 ${index === 0 ? 'bg-yellow-400' : index === 1 ? 'bg-gray-400' : index === 2 ? 'bg-orange-400' : index === 4 ? 'bg-purple-500' : 'bg-gray-200'} rounded-full flex items-center justify-center text-sm font-bold ${index < 3 || index === 4 ? 'text-white' : 'text-gray-600'}">${index + 1}</span>
                    <span class="${index === 4 ? 'font-medium' : ''}">${player.name}${index === 4 ? ' (ุฃูุช)' : ''}</span>
                </div>
                <span class="${index === 0 ? 'text-yellow-600' : index === 1 ? 'text-gray-600' : index === 2 ? 'text-orange-600' : index === 4 ? 'text-purple-600' : 'text-gray-600'} ${index === 4 ? 'font-medium' : ''}">${player.points} ุฅุญุงูุฉ</span>
            `;
            leaderboardList.appendChild(div);
        });

        // ุนุฑุถ ุงูุตูุญุฉ ุงูุฃููู ุงูุชุฑุงุถููุง
        showPage('profile');
    </script>
</body>
                        </html>
